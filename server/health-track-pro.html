<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Track Pro - 24/7 Tele H</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .health-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px 32px;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            color: #2d3748;
            font-size: 28px;
            font-weight: 700;
            margin: 0;
        }
        
        .header-subtitle {
            color: #718096;
            font-size: 14px;
            margin-top: 4px;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
        }
        
        .btn-secondary {
            background: rgba(113, 128, 150, 0.1);
            color: #4a5568;
            border: 1px solid rgba(113, 128, 150, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .metric-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .metric-icon.blue { background: linear-gradient(135deg, #63b3ed, #4299e1); }
        .metric-icon.green { background: linear-gradient(135deg, #68d391, #48bb78); }
        .metric-icon.orange { background: linear-gradient(135deg, #f6ad55, #ed8936); }
        .metric-icon.purple { background: linear-gradient(135deg, #b794f6, #9f7aea); }
        .metric-icon.red { background: linear-gradient(135deg, #fc8181, #e53e3e); }
        
        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .metric-label {
            color: #718096;
            font-size: 14px;
            font-weight: 500;
        }
        
        .metric-trend {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
        }
        
        .trend-indicator {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .trend-indicator.positive {
            background: rgba(104, 211, 145, 0.2);
            color: #38a169;
        }
        
        .trend-indicator.negative {
            background: rgba(252, 129, 129, 0.2);
            color: #e53e3e;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
        }
        
        .main-content {
            display: grid;
            gap: 20px;
        }
        
        .content-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: #2d3748;
        }
        
        .patient-list {
            display: grid;
            gap: 12px;
        }
        
        .patient-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: rgba(247, 250, 252, 0.8);
            border-radius: 12px;
            border: 1px solid rgba(226, 232, 240, 0.5);
        }
        
        .patient-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .patient-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #63b3ed, #4299e1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .patient-details h4 {
            color: #2d3748;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .patient-details p {
            color: #718096;
            font-size: 12px;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-badge.normal {
            background: rgba(104, 211, 145, 0.2);
            color: #38a169;
        }
        
        .status-badge.warning {
            background: rgba(246, 173, 85, 0.2);
            color: #d69e2e;
        }
        
        .status-badge.critical {
            background: rgba(252, 129, 129, 0.2);
            color: #e53e3e;
        }
        
        .sidebar {
            display: grid;
            gap: 20px;
        }
        
        .alert-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(254, 243, 199, 0.5);
            border-radius: 12px;
            border-left: 4px solid #f6ad55;
        }
        
        .alert-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f6ad55;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        
        .alert-content h4 {
            color: #2d3748;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .alert-content p {
            color: #718096;
            font-size: 12px;
        }
        
        .vital-signs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .vital-card {
            padding: 20px;
            background: linear-gradient(135deg, rgba(99, 179, 237, 0.1), rgba(66, 153, 225, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(99, 179, 237, 0.2);
            text-align: center;
        }
        
        .vital-value {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }
        
        .vital-label {
            color: #718096;
            font-size: 14px;
            font-weight: 500;
        }
        
        .chart-container {
            height: 400px;
            position: relative;
            background: rgba(247, 250, 252, 0.5);
            border-radius: 12px;
            border: 1px solid rgba(203, 213, 224, 0.3);
            margin-top: 20px;
            padding: 20px;
        }

        .chart-canvas {
            width: 100%;
            height: 100%;
        }

        .chart-legend {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
        }

        .legend-color {
            width: 16px;
            height: 3px;
            border-radius: 2px;
        }

        .legend-color.heart-rate {
            background: #e53e3e;
        }

        .legend-color.blood-pressure {
            background: #3182ce;
        }

        .chart-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
        
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .vital-signs-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #718096;
        }
        
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
        }
        
        .tab-btn {
            padding: 12px 20px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #718096;
            transition: all 0.2s;
        }
        
        .tab-btn.active {
            color: #4299e1;
            border-bottom-color: #4299e1;
        }
    </style>
</head>
<body>
    <div class="health-container">
        <!-- Header -->
        <div class="header">
            <div>
                <h1>Health Track Pro</h1>
                <p class="header-subtitle">24/7 Tele H Technology Services - Advanced Healthcare Monitoring</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="exportData()">Export Data</button>
                <button class="btn btn-primary" onclick="addPatient()">Add Patient</button>
                <button class="btn btn-secondary" onclick="logout()">Logout</button>
            </div>
        </div>

        <!-- Dashboard Metrics -->
        <div class="dashboard-grid">
            <div class="metric-card" onclick="showPatientsModal()">
                <div class="metric-header">
                    <div>
                        <div class="metric-value" id="totalPatients">247</div>
                        <div class="metric-label">Total Patients</div>
                    </div>
                    <div class="metric-icon blue">üë•</div>
                </div>
                <div class="metric-trend">
                    <span class="trend-indicator positive">‚Üó +12.5%</span>
                    <span style="color: #718096; font-size: 12px;">vs last month</span>
                </div>
            </div>

            <div class="metric-card" onclick="showVitalsModal()">
                <div class="metric-header">
                    <div>
                        <div class="metric-value" id="vitalsRecorded">4,832</div>
                        <div class="metric-label">Vitals Recorded</div>
                    </div>
                    <div class="metric-icon green">üìä</div>
                </div>
                <div class="metric-trend">
                    <span class="trend-indicator positive">‚Üó +8.3%</span>
                    <span style="color: #718096; font-size: 12px;">this week</span>
                </div>
            </div>

            <div class="metric-card" onclick="showAlertsModal()">
                <div class="metric-header">
                    <div>
                        <div class="metric-value" id="activeAlerts">23</div>
                        <div class="metric-label">Active Alerts</div>
                    </div>
                    <div class="metric-icon orange">‚ö†Ô∏è</div>
                </div>
                <div class="metric-trend">
                    <span class="trend-indicator negative">‚Üë +5</span>
                    <span style="color: #718096; font-size: 12px;">needs attention</span>
                </div>
            </div>

            <div class="metric-card" onclick="showComplianceModal()">
                <div class="metric-header">
                    <div>
                        <div class="metric-value" id="complianceRate">96.2%</div>
                        <div class="metric-label">Compliance Rate</div>
                    </div>
                    <div class="metric-icon purple">‚úì</div>
                </div>
                <div class="metric-trend">
                    <span class="trend-indicator positive">‚Üó +2.4%</span>
                    <span style="color: #718096; font-size: 12px;">improvement</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content-grid">
            <div class="main-content">
                <!-- Recent Patients -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Patients</h3>
                        <button class="btn btn-secondary" onclick="viewAllPatients()">View All</button>
                    </div>
                    <div class="patient-list" id="patientList">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>

                <!-- Vital Signs Overview -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">Live Vital Signs</h3>
                        <button class="btn btn-secondary" onclick="refreshVitals()">Refresh</button>
                    </div>
                    <div class="vital-signs-grid" id="vitalSignsGrid">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>

                <!-- Analytics Chart -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">Health Analytics</h3>
                        <div class="tabs">
                            <button class="tab-btn active" onclick="showChart('vitals')">Vitals Trends</button>
                            <button class="tab-btn" onclick="showChart('compliance')">Compliance</button>
                            <button class="tab-btn" onclick="showChart('alerts')">Alert History</button>
                        </div>
                    </div>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <div class="legend-color heart-rate"></div>
                            <span>Heart Rate (BPM)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color blood-pressure"></div>
                            <span>Blood Pressure (Systolic)</span>
                        </div>
                    </div>
                    <div class="chart-container" id="chartContainer">
                        <canvas id="healthChart" class="chart-canvas"></canvas>
                        <div id="chartTooltip" class="chart-tooltip"></div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Critical Alerts -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">Critical Alerts</h3>
                        <span class="status-badge critical">Live</span>
                    </div>
                    <div id="criticalAlertsList">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">Quick Actions</h3>
                    </div>
                    <div style="display: grid; gap: 12px;">
                        <button class="btn btn-primary" onclick="emergencyProtocol()">Emergency Protocol</button>
                        <button class="btn btn-secondary" onclick="generateReport()">Generate Report</button>
                        <button class="btn btn-secondary" onclick="scheduleCheckup()">Schedule Checkup</button>
                        <button class="btn btn-secondary" onclick="deviceSync()">Sync Devices</button>
                    </div>
                </div>

                <!-- System Status -->
                <div class="content-card">
                    <div class="card-header">
                        <h3 class="card-title">System Status</h3>
                        <span class="status-badge normal">Online</span>
                    </div>
                    <div style="display: grid; gap: 8px;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>HC03 Devices</span>
                            <span style="color: #38a169; font-weight: 600;">98% Connected</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Data Sync</span>
                            <span style="color: #38a169; font-weight: 600;">Real-time</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Server Load</span>
                            <span style="color: #d69e2e; font-weight: 600;">Moderate</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Last Backup</span>
                            <span style="color: #718096;">2 hours ago</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="patientsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Patient Management</h2>
                <button class="close-btn" onclick="closeModal('patientsModal')">&times;</button>
            </div>
            <div id="patientsModalContent">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <div id="vitalsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Vital Signs Analysis</h2>
                <button class="close-btn" onclick="closeModal('vitalsModal')">&times;</button>
            </div>
            <div id="vitalsModalContent">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <div id="alertsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Alert Management</h2>
                <button class="close-btn" onclick="closeModal('alertsModal')">&times;</button>
            </div>
            <div id="alertsModalContent">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <div id="complianceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Compliance Analytics</h2>
                <button class="close-btn" onclick="closeModal('complianceModal')">&times;</button>
            </div>
            <div id="complianceModalContent">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <script>
        // Sample patient data
        const patients = [
            { id: 1, name: "John Smith", age: 45, status: "normal", lastReading: "2 min ago", vitals: { hr: 72, bp: "120/80", temp: 98.6, spo2: 98 } },
            { id: 2, name: "Sarah Johnson", age: 38, status: "warning", lastReading: "5 min ago", vitals: { hr: 95, bp: "140/90", temp: 99.1, spo2: 96 } },
            { id: 3, name: "Michael Brown", age: 52, status: "critical", lastReading: "1 min ago", vitals: { hr: 110, bp: "160/95", temp: 101.2, spo2: 92 } },
            { id: 4, name: "Emily Davis", age: 29, status: "normal", lastReading: "3 min ago", vitals: { hr: 68, bp: "115/75", temp: 98.4, spo2: 99 } },
            { id: 5, name: "Robert Wilson", age: 61, status: "warning", lastReading: "4 min ago", vitals: { hr: 88, bp: "135/85", temp: 98.8, spo2: 94 } }
        ];

        // Initialize dashboard
        function initializeDashboard() {
            loadPatientList();
            loadVitalSigns();
            loadCriticalAlerts();
            updateMetrics();
            
            // Auto-refresh every 30 seconds
            setInterval(() => {
                updateMetrics();
                loadVitalSigns();
                loadCriticalAlerts();
            }, 30000);
        }

        function loadPatientList() {
            const patientList = document.getElementById('patientList');
            patientList.innerHTML = '';
            
            patients.slice(0, 5).forEach(patient => {
                const patientItem = document.createElement('div');
                patientItem.className = 'patient-item';
                patientItem.innerHTML = `
                    <div class="patient-info">
                        <div class="patient-avatar">${patient.name.split(' ').map(n => n[0]).join('')}</div>
                        <div class="patient-details">
                            <h4>${patient.name}</h4>
                            <p>Age ${patient.age} ‚Ä¢ Last reading: ${patient.lastReading}</p>
                        </div>
                    </div>
                    <span class="status-badge ${patient.status}">${patient.status.toUpperCase()}</span>
                `;
                patientItem.onclick = () => showPatientDetails(patient.id);
                patientList.appendChild(patientItem);
            });
        }

        function loadVitalSigns() {
            const vitalSignsGrid = document.getElementById('vitalSignsGrid');
            vitalSignsGrid.innerHTML = '';
            
            const avgVitals = calculateAverageVitals();
            
            ['Heart Rate', 'Blood Pressure', 'Temperature', 'Oxygen Level'].forEach((vital, index) => {
                const vitalCard = document.createElement('div');
                vitalCard.className = 'vital-card';
                
                let value, unit;
                switch(vital) {
                    case 'Heart Rate':
                        value = avgVitals.hr;
                        unit = 'bpm';
                        break;
                    case 'Blood Pressure':
                        value = avgVitals.bp;
                        unit = 'mmHg';
                        break;
                    case 'Temperature':
                        value = avgVitals.temp;
                        unit = '¬∞F';
                        break;
                    case 'Oxygen Level':
                        value = avgVitals.spo2;
                        unit = '%';
                        break;
                }
                
                vitalCard.innerHTML = `
                    <div class="vital-value">${value}${unit}</div>
                    <div class="vital-label">${vital}</div>
                `;
                vitalSignsGrid.appendChild(vitalCard);
            });
        }

        function loadCriticalAlerts() {
            const criticalAlertsList = document.getElementById('criticalAlertsList');
            criticalAlertsList.innerHTML = '';
            
            const criticalPatients = patients.filter(p => p.status === 'critical' || p.status === 'warning');
            
            criticalPatients.forEach(patient => {
                const alertItem = document.createElement('div');
                alertItem.className = 'alert-item';
                alertItem.innerHTML = `
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <h4>${patient.name}</h4>
                        <p>${getAlertMessage(patient)}</p>
                    </div>
                `;
                criticalAlertsList.appendChild(alertItem);
            });
        }

        function calculateAverageVitals() {
            const total = patients.reduce((acc, patient) => {
                acc.hr += patient.vitals.hr;
                acc.temp += patient.vitals.temp;
                acc.spo2 += patient.vitals.spo2;
                return acc;
            }, { hr: 0, temp: 0, spo2: 0 });
            
            return {
                hr: Math.round(total.hr / patients.length),
                bp: "125/82", // Average BP representation
                temp: (total.temp / patients.length).toFixed(1),
                spo2: Math.round(total.spo2 / patients.length)
            };
        }

        function getAlertMessage(patient) {
            if (patient.vitals.hr > 100) return `High heart rate: ${patient.vitals.hr} bpm`;
            if (patient.vitals.bp.split('/')[0] > 140) return `Elevated blood pressure: ${patient.vitals.bp}`;
            if (patient.vitals.temp > 100) return `Fever detected: ${patient.vitals.temp}¬∞F`;
            if (patient.vitals.spo2 < 95) return `Low oxygen: ${patient.vitals.spo2}%`;
            return "Multiple vitals outside normal range";
        }

        function updateMetrics() {
            // Simulate real-time metric updates
            const totalPatients = document.getElementById('totalPatients');
            const vitalsRecorded = document.getElementById('vitalsRecorded');
            const activeAlerts = document.getElementById('activeAlerts');
            const complianceRate = document.getElementById('complianceRate');
            
            // Add small random variations to simulate real-time updates
            if (Math.random() > 0.7) {
                const currentTotal = parseInt(totalPatients.textContent);
                totalPatients.textContent = currentTotal + (Math.random() > 0.5 ? 1 : 0);
                
                const currentVitals = parseInt(vitalsRecorded.textContent.replace(',', ''));
                vitalsRecorded.textContent = (currentVitals + Math.floor(Math.random() * 5)).toLocaleString();
            }
        }

        // Modal functions
        function showPatientsModal() {
            const modal = document.getElementById('patientsModal');
            const content = document.getElementById('patientsModalContent');
            
            content.innerHTML = `
                <div class="tabs">
                    <button class="tab-btn active">All Patients</button>
                    <button class="tab-btn">Critical</button>
                    <button class="tab-btn">Normal</button>
                </div>
                <div style="margin-top: 20px;">
                    ${patients.map(patient => `
                        <div class="patient-item" style="margin-bottom: 12px;">
                            <div class="patient-info">
                                <div class="patient-avatar">${patient.name.split(' ').map(n => n[0]).join('')}</div>
                                <div class="patient-details">
                                    <h4>${patient.name}</h4>
                                    <p>Age ${patient.age} ‚Ä¢ HR: ${patient.vitals.hr} bpm ‚Ä¢ BP: ${patient.vitals.bp}</p>
                                </div>
                            </div>
                            <span class="status-badge ${patient.status}">${patient.status.toUpperCase()}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            
            modal.classList.add('active');
        }

        function showVitalsModal() {
            const modal = document.getElementById('vitalsModal');
            const content = document.getElementById('vitalsModalContent');
            
            content.innerHTML = `
                <div class="vital-signs-grid">
                    ${patients.map(patient => `
                        <div class="vital-card">
                            <div style="margin-bottom: 12px; font-weight: 600;">${patient.name}</div>
                            <div style="display: grid; gap: 8px; text-align: left;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Heart Rate:</span>
                                    <span style="font-weight: 600;">${patient.vitals.hr} bpm</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Blood Pressure:</span>
                                    <span style="font-weight: 600;">${patient.vitals.bp} mmHg</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Temperature:</span>
                                    <span style="font-weight: 600;">${patient.vitals.temp}¬∞F</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>SpO2:</span>
                                    <span style="font-weight: 600;">${patient.vitals.spo2}%</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            modal.classList.add('active');
        }

        function showAlertsModal() {
            const modal = document.getElementById('alertsModal');
            const content = document.getElementById('alertsModalContent');
            
            const alerts = patients.filter(p => p.status !== 'normal').map(patient => ({
                ...patient,
                alertMessage: getAlertMessage(patient),
                severity: patient.status === 'critical' ? 'high' : 'medium'
            }));
            
            content.innerHTML = `
                <div style="display: grid; gap: 16px;">
                    ${alerts.map(alert => `
                        <div class="alert-item" style="border-left-color: ${alert.severity === 'high' ? '#e53e3e' : '#f6ad55'};">
                            <div class="alert-icon">${alert.severity === 'high' ? 'üö®' : '‚ö†Ô∏è'}</div>
                            <div class="alert-content">
                                <h4>${alert.name} - ${alert.alertMessage}</h4>
                                <p>Last reading: ${alert.lastReading} ‚Ä¢ Status: ${alert.status.toUpperCase()}</p>
                                <button class="btn btn-primary" style="margin-top: 8px; padding: 4px 12px; font-size: 12px;" onclick="acknowledgeAlert(${alert.id})">Acknowledge</button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            modal.classList.add('active');
        }

        function showComplianceModal() {
            const modal = document.getElementById('complianceModal');
            const content = document.getElementById('complianceModalContent');
            
            content.innerHTML = `
                <div style="display: grid; gap: 20px;">
                    <div class="vital-card" style="text-align: left;">
                        <h4 style="margin-bottom: 16px;">Overall Compliance: 96.2%</h4>
                        <div style="background: #e2e8f0; height: 8px; border-radius: 4px; margin-bottom: 12px;">
                            <div style="background: #48bb78; height: 100%; width: 96.2%; border-radius: 4px;"></div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 20px;">
                            <div>
                                <div style="color: #718096; font-size: 14px;">Medication Adherence</div>
                                <div style="font-size: 18px; font-weight: 600; color: #48bb78;">94.8%</div>
                            </div>
                            <div>
                                <div style="color: #718096; font-size: 14px;">Appointment Attendance</div>
                                <div style="font-size: 18px; font-weight: 600; color: #48bb78;">97.6%</div>
                            </div>
                            <div>
                                <div style="color: #718096; font-size: 14px;">Vital Signs Recording</div>
                                <div style="font-size: 18px; font-weight: 600; color: #48bb78;">98.1%</div>
                            </div>
                            <div>
                                <div style="color: #718096; font-size: 14px;">Device Connectivity</div>
                                <div style="font-size: 18px; font-weight: 600; color: #f6ad55;">92.3%</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Action functions
        function acknowledgeAlert(patientId) {
            alert('Alert acknowledged for patient ID: ' + patientId);
            closeModal('alertsModal');
        }

        function showPatientDetails(patientId) {
            const patient = patients.find(p => p.id === patientId);
            alert('Showing details for: ' + patient.name);
        }

        function exportData() {
            alert('Exporting healthcare data...');
        }

        function addPatient() {
            alert('Add new patient form would open here');
        }

        function emergencyProtocol() {
            alert('Emergency protocol activated!');
        }

        function generateReport() {
            alert('Generating comprehensive health report...');
        }

        function scheduleCheckup() {
            alert('Opening appointment scheduler...');
        }

        function deviceSync() {
            alert('Syncing all HC03 devices...');
        }

        function refreshVitals() {
            loadVitalSigns();
            alert('Vital signs refreshed');
        }

        function viewAllPatients() {
            showPatientsModal();
        }

        function showChart(type) {
            // Update tab states
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'vitals') {
                initializeHealthChart();
            } else {
                const chartContainer = document.getElementById('chartContainer');
                chartContainer.innerHTML = `üìä ${type.charAt(0).toUpperCase() + type.slice(1)} Analytics Chart`;
            }
        }

        // Chart implementation
        let healthChart = null;
        
        function initializeHealthChart() {
            const canvas = document.getElementById('healthChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const tooltip = document.getElementById('chartTooltip');
            
            // Sample data based on your image - Heart Rate and Blood Pressure over time
            const timeLabels = ['6:00AM', '8:00AM', '10:00AM', '12:00PM', '2:00PM', '4:00PM', '6:00PM'];
            const heartRateData = [68, 72, 75, 78, 76, 74, 70];
            const bloodPressureData = [118, 122, 125, 128, 126, 124, 120];
            
            // Set canvas size
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 60;
            const chartWidth = width - (padding * 2);
            const chartHeight = height - (padding * 2);
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Chart background
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillRect(0, 0, width, height);
            
            // Grid lines
            ctx.strokeStyle = 'rgba(203, 213, 224, 0.3)';
            ctx.lineWidth = 1;
            
            // Vertical grid lines
            for (let i = 0; i <= 6; i++) {
                const x = padding + (chartWidth / 6) * i;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
            }
            
            // Horizontal grid lines
            for (let i = 0; i <= 8; i++) {
                const y = padding + (chartHeight / 8) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            // Y-axis labels (left side for heart rate, right side for blood pressure)
            ctx.fillStyle = '#718096';
            ctx.font = '12px -apple-system, BlinkMacSystemFont, sans-serif';
            ctx.textAlign = 'right';
            
            // Heart rate labels (60-140 BPM)
            for (let i = 0; i <= 8; i++) {
                const value = 60 + (80 / 8) * (8 - i);
                const y = padding + (chartHeight / 8) * i;
                ctx.fillText(Math.round(value), padding - 10, y + 4);
            }
            
            // Blood pressure labels (right side, 100-180 mmHg)
            ctx.textAlign = 'left';
            for (let i = 0; i <= 8; i++) {
                const value = 100 + (80 / 8) * (8 - i);
                const y = padding + (chartHeight / 8) * i;
                ctx.fillText(Math.round(value), width - padding + 10, y + 4);
            }
            
            // X-axis labels
            ctx.textAlign = 'center';
            timeLabels.forEach((label, i) => {
                const x = padding + (chartWidth / 6) * i;
                ctx.fillText(label, x, height - padding + 20);
            });
            
            // Draw Heart Rate line (red)
            ctx.strokeStyle = '#e53e3e';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            heartRateData.forEach((value, i) => {
                const x = padding + (chartWidth / 6) * i;
                const y = padding + chartHeight - ((value - 60) / 80) * chartHeight;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();
            
            // Draw Heart Rate points
            ctx.fillStyle = '#e53e3e';
            heartRateData.forEach((value, i) => {
                const x = padding + (chartWidth / 6) * i;
                const y = padding + chartHeight - ((value - 60) / 80) * chartHeight;
                
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // Draw Blood Pressure line (blue)
            ctx.strokeStyle = '#3182ce';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            bloodPressureData.forEach((value, i) => {
                const x = padding + (chartWidth / 6) * i;
                const y = padding + chartHeight - ((value - 100) / 80) * chartHeight;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();
            
            // Draw Blood Pressure points
            ctx.fillStyle = '#3182ce';
            bloodPressureData.forEach((value, i) => {
                const x = padding + (chartWidth / 6) * i;
                const y = padding + chartHeight - ((value - 100) / 80) * chartHeight;
                
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // Add mouse interaction for tooltips
            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // Find closest data point
                let closestIndex = -1;
                let closestDistance = Infinity;
                
                heartRateData.forEach((value, i) => {
                    const x = padding + (chartWidth / 6) * i;
                    const y = padding + chartHeight - ((value - 60) / 80) * chartHeight;
                    const distance = Math.sqrt((mouseX - x) ** 2 + (mouseY - y) ** 2);
                    
                    if (distance < 20 && distance < closestDistance) {
                        closestDistance = distance;
                        closestIndex = i;
                    }
                });
                
                if (closestIndex !== -1) {
                    const time = timeLabels[closestIndex];
                    const hr = heartRateData[closestIndex];
                    const bp = bloodPressureData[closestIndex];
                    
                    tooltip.innerHTML = `
                        <strong>${time}</strong><br>
                        Heart Rate: ${hr} BPM<br>
                        Blood Pressure: ${bp} mmHg
                    `;
                    tooltip.style.display = 'block';
                    tooltip.style.left = (e.clientX - rect.left + 10) + 'px';
                    tooltip.style.top = (e.clientY - rect.top - 10) + 'px';
                } else {
                    tooltip.style.display = 'none';
                }
            });
            
            canvas.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '/';
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initializeDashboard();
            // Initialize the vitals chart by default
            setTimeout(() => {
                initializeHealthChart();
            }, 500);
        });
    </script>
</body>
</html>